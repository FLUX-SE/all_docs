<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.189">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>FLUX:: Immersive Products Documentation – target</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">FLUX:: Immersive Products Documentation</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">FLUX:: Immersive Products Documentation</a> 
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">Home</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">Plug-ins</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false">Evo Channel</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  ../evo-channel/index.html
  </li>
          <li class="sidebar-item">
  ../evo-channel/General_Settings.qmd
  </li>
          <li class="sidebar-item">
  ../evo-channel/Module_Settings.qmd
  </li>
          <li class="sidebar-item">
  ../evo-channel/Geek_Settings.qmd
  </li>
          <li class="sidebar-item">
  ../evo-channel/Plugin_Settings.qmd
  </li>
          <li class="sidebar-item">
  ../evo-channel/Shortcuts.qmd
  </li>
          <li class="sidebar-item">
  ../evo-channel/Preset_Management.qmd
  </li>
          <li class="sidebar-item">
  ../evo-channel/Preset_Manager.qmd
  </li>
          <li class="sidebar-item">
  ../evo-channel/Specifications.qmd
  </li>
      </ul>
  </li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#target" id="toc-target" class="nav-link active" data-scroll-target="#target">Target</a>
  <ul class="collapse">
  <li><a href="#target-preset" id="toc-target-preset" class="nav-link" data-scroll-target="#target-preset">(12) Target Preset</a></li>
  <li><a href="#target-register" id="toc-target-register" class="nav-link" data-scroll-target="#target-register">(13) Target Register</a>
  <ul class="collapse">
  <li><a href="#registers-available-in-voice-mode" id="toc-registers-available-in-voice-mode" class="nav-link" data-scroll-target="#registers-available-in-voice-mode">Registers available in Voice mode:</a></li>
  <li><a href="#registers-available-in-instrument-mode" id="toc-registers-available-in-instrument-mode" class="nav-link" data-scroll-target="#registers-available-in-instrument-mode">Registers available in instrument mode:</a></li>
  </ul></li>
  <li><a href="#transpose" id="toc-transpose" class="nav-link" data-scroll-target="#transpose">(14) Transpose</a></li>
  <li><a href="#formant" id="toc-formant" class="nav-link" data-scroll-target="#formant">(15) Formant</a></li>
  <li><a href="#link" id="toc-link" class="nav-link" data-scroll-target="#link">(16) Link</a></li>
  <li><a href="#inv." id="toc-inv." class="nav-link" data-scroll-target="#inv.">(17) Inv.</a></li>
  <li><a href="#voice-forger-target-f0" id="toc-voice-forger-target-f0" class="nav-link" data-scroll-target="#voice-forger-target-f0">(18) Voice Forger Target F(0)</a></li>
  <li><a href="#integration" id="toc-integration" class="nav-link" data-scroll-target="#integration">(19) Integration</a></li>
  <li><a href="#flat-expr.-voice-and-instrument-mode-only" id="toc-flat-expr.-voice-and-instrument-mode-only" class="nav-link" data-scroll-target="#flat-expr.-voice-and-instrument-mode-only">(20) Flat &lt;–&gt; Expr. (Voice and Instrument Mode only)</a></li>
  <li><a href="#young-old-voice-mode-only" id="toc-young-old-voice-mode-only" class="nav-link" data-scroll-target="#young-old-voice-mode-only">(21) Young &lt;–&gt; Old (Voice Mode only)</a></li>
  <li><a href="#male-female-voice-mode-only" id="toc-male-female-voice-mode-only" class="nav-link" data-scroll-target="#male-female-voice-mode-only">(22) Male &lt;–&gt; Female (Voice Mode only)</a></li>
  <li><a href="#breathy-voice-and-instrument-mode-only" id="toc-breathy-voice-and-instrument-mode-only" class="nav-link" data-scroll-target="#breathy-voice-and-instrument-mode-only">(23) Breathy (Voice and Instrument Mode only)</a></li>
  </ul></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="Target.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">



<section id="target" class="level1">
<h1>Target</h1>
<p>For spoken voice it is good practice to playback between 5 to 15 seconds of any new audio material with Learn engaged to let the plug-in adapt to the specifics of the audio material. For singing voice or instrument sounds it is essential that the audio segment that is used covers the complete pitch range that will be processed. Otherwise the internal parameter settings will not achieve optimum quality for the transformation.</p>
<p>!&gt; Do not forget to switch off learn mode when doing the actual processing, or you may encounter strange behavior!</p>
<p>Now that you have set the source parameters, here comes the fun part: transforming the source material, according to target parameters. T.R.A.X. allows for a large palette of transformations such as: * Pristine quality up and down pitch-shifting, preserving formant and transient integrity * Re-tuning the material to a fixed-pitch, a given musical scale, etc. * Altering perceived gender, age, etc. * Special effects for sound design and such</p>
<p><img src="include/trax_05.png" class="img-fluid"></p>
<p>In all of these contexts, unwanted artifacts are kept to a minimum and the natural quality and timbre of voices and instruments are preserved, thanks to the innovative analysis algorithms used.</p>
<blockquote class="blockquote">
<p>Please note, however, that in the case of extreme transformations, the perceived quality of the voice might degrade. We strongly believe this not due to a flaw or a limitation of the algorithms, but more to the fact that the human brain is extremely well trained and sensitive to the perception of voice, with all its intricacies. In other a words, please do not reasonably expect a computer to turn an amateur singer into a seasoned Opera pro or your 5-year old son into the 8 o’clock veteran news presenter. This would involve something much more complex than pitch and formant modification, such as prosody, and some understanding of the meaning of the underlying words or musical emotion conveyed.</p>
</blockquote>
<section id="target-preset" class="level2">
<h2 class="anchored" data-anchor-id="target-preset">(12) Target Preset</h2>
<p>Only available in Voice Mode, the Target Presets cover a selection of gender and age combinations. Available presets</p>
<ul>
<li>Man</li>
<li>Woman</li>
<li>Young Man</li>
<li>Young Woman</li>
<li>Boy</li>
<li>Girl</li>
</ul>
</section>
<section id="target-register" class="level2">
<h2 class="anchored" data-anchor-id="target-register">(13) Target Register</h2>
<p>Available in Voice and Instrument Mode, the Target Register presets allow to change the register of the material. Ensure source and target registers match if you want to preserve register.</p>
<p>Register is locked to spoken voice when the source is defined as a spoken voice also, as in this case there is no “melody” for the target voice to follow.</p>
<section id="registers-available-in-voice-mode" class="level3">
<h3 class="anchored" data-anchor-id="registers-available-in-voice-mode">Registers available in Voice mode:</h3>
<ul>
<li>Spoken Voice</li>
<li>Singing Bass</li>
<li>Singing Baritone</li>
<li>Singing Tenor</li>
<li>Singing Counter Tenor</li>
<li>Singing Contralto</li>
<li>Singing Mezzo Soprano</li>
<li>Singing Soprano</li>
</ul>
</section>
<section id="registers-available-in-instrument-mode" class="level3">
<h3 class="anchored" data-anchor-id="registers-available-in-instrument-mode">Registers available in instrument mode:</h3>
<ul>
<li>Undefined. Only choice available if “Undefined” is selected as Source register.</li>
<li>Bass</li>
<li>Baritone</li>
<li>Tenor</li>
<li>Counter Tenor</li>
<li>Contralto</li>
<li>Mezzo Soprano</li>
<li>Soprano</li>
</ul>
</section>
</section>
<section id="transpose" class="level2">
<h2 class="anchored" data-anchor-id="transpose">(14) Transpose</h2>
<p>Applies a global transposition, also known as pitch-shift to the incoming audio, expressed in semi–tones. This affects the pitched content only, preserving formant and transient content for the most natural result. An octave shift corresponds to a Transpose factor of 12 semitones.</p>
</section>
<section id="formant" class="level2">
<h2 class="anchored" data-anchor-id="formant">(15) Formant</h2>
<p>Applies a global frequency-shift of the formant content, independently of pitched and transient content.</p>
</section>
<section id="link" class="level2">
<h2 class="anchored" data-anchor-id="link">(16) Link</h2>
<p>When engaged, the Format shift factor is locked onto the transpose factor value, and only the Transpose slider can be moved.</p>
</section>
<section id="inv." class="level2">
<h2 class="anchored" data-anchor-id="inv.">(17) Inv.</h2>
<p>When the inverse button is engaged, the Formant shift amount follows the Transpose factor, in inverse fashion, i.e.&nbsp; formants are shifted by an amount opposite of the pitch.</p>
</section>
<section id="voice-forger-target-f0" class="level2">
<h2 class="anchored" data-anchor-id="voice-forger-target-f0">(18) Voice Forger Target F(0)</h2>
<p>The VoiceForger sub-section is used for more sophisticating pitch and formant transformations.</p>
<p>Here the incoming source characteristics extracted by the detection stage are used as input to a series of modifiers. The first possible modifier, F(0), changes the fundamental frequency of incoming notes, “squeezing” them back into a series of reference target intervals, defined by the modes which we explain below, with the Flat&lt;–&gt;Expr. controlling the “tightness” of this “squeeze”.</p>
<p>This can be used to correct a less than perfect take, impart a robotic character to a voice, make an instrument sound like a synthesizer, etc.</p>
<ul>
<li><p>Recto Tono<br>
Modifies the pitch with regard to the reference mean F0 as defined in the Source parameters, by an amount specified by the Flat&lt;&gt;Expr (FE) control. With FE set to -100% (Flat), no pitch variation remains in the processed sound, which gives a completely monotonous voice, reminiscent of early voice synthesizers.</p></li>
<li><p>Recto Tono (Tuned)<br>
Same as above, but taking into account the source tuning.</p></li>
<li><p>Chromatic<br>
Brings back the pitch of the notes towards a chromatic, equal-temperament scale.</p></li>
<li><p>Mode 1 tr 1 (tone)<br>
Attracts pitch towards the closest note on a succession of full-tone (2 half-tones) intervals.</p></li>
<li><p>Mode 1 tr 2 (tone)<br>
Same as above, transposed 1 semitone above root key.</p></li>
<li><p>Mode 2 tr 1 (tone, semi tone)<br>
Works on a succession of intervals made up of groups of a full-tone followed by a semi-tone.</p></li>
<li><p>Mode 2 tr 2 (tone, semi tone)<br>
Same as above, first interval is a semi-tone.</p></li>
<li><p>Mode 2 tr 3 (tone, semi tone)<br>
Same as above, first interval is a tone.</p></li>
</ul>
</section>
<section id="integration" class="level2">
<h2 class="anchored" data-anchor-id="integration">(19) Integration</h2>
<p>This controls smoothing of the time-variations of the fundamental frequency. Increasing it will therefore give more progressive note-to-note transitions, for a more “legato” playing type of feel.</p>
</section>
<section id="flat-expr.-voice-and-instrument-mode-only" class="level2">
<h2 class="anchored" data-anchor-id="flat-expr.-voice-and-instrument-mode-only">(20) Flat &lt;–&gt; Expr. (Voice and Instrument Mode only)</h2>
<p>The Flat &lt;–&gt; Expression knob defines the amount of pitch correction taking place. When set to “Flat” (-100%), this controls how close towards the target reference notes (single note for Recto Tono, chromatic scale, etc.) the fundamental frequency is pulled. Conversely, when set to “Expr.”, it exaggerates the pitch differences with respect from the target reference notes. As you expect, a 0% expression setting leaves the pitch unaffected by this section.</p>
</section>
<section id="young-old-voice-mode-only" class="level2">
<h2 class="anchored" data-anchor-id="young-old-voice-mode-only">(21) Young &lt;–&gt; Old (Voice Mode only)</h2>
<p>This high-level control gradually alters the perceived age of a voice, either sung or spoken.</p>
</section>
<section id="male-female-voice-mode-only" class="level2">
<h2 class="anchored" data-anchor-id="male-female-voice-mode-only">(22) Male &lt;–&gt; Female (Voice Mode only)</h2>
<p>This high-level control gradually alters the perceived gender of a voice, either sung or spoken.</p>
</section>
<section id="breathy-voice-and-instrument-mode-only" class="level2">
<h2 class="anchored" data-anchor-id="breathy-voice-and-instrument-mode-only">(23) Breathy (Voice and Instrument Mode only)</h2>
<p>Increase the “breathiness” of a voice, or an instrument, making it whisper.</p>
<p>Increasing this close to 100% will give you that chain-smoker voice timbre, ala Don Corleone in the Godfather, without the risks and costs involved. You can also use this with a wind instrument to accentuate the breathing sound which gives so much character to a performance.</p>
<p>This panel acts as a mini-mixing console where the various components of the audio are sent to and summed-back to the output. It allows for further tweaking of the final result and isolation of each part of the sound, and one can also use this to achieve special effects.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>